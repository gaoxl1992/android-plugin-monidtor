# Android 通知监听插件

## 插件简介

实时监听 Android 系统所有应用的通知消息，支持微信、QQ、短信、钉钉等所有应用通知的获取。轻松实现消息监控、自动化处理等功能。

## 功能特性

✅ **全面监听** - 监听系统所有应用通知（微信、QQ、短信、钉钉等）  
✅ **实时推送** - 收到通知即时回调，无延迟  
✅ **详细信息** - 获取应用包名、通知标题、通知内容、时间戳  
✅ **权限管理** - 提供权限检查和引导开启接口  
✅ **服务监控** - 实时检测监听服务运行状态  
✅ **简单易用** - API 简洁，5 分钟快速集成  

## 适用场景

- 📱 **消息聚合应用** - 统一管理多个应用的通知
- 🤖 **消息自动化** - 根据通知内容自动执行操作
- 📊 **数据统计** - 统计和分析通知数据
- 🔔 **消息提醒** - 自定义通知提醒方式
- 💼 **办公助手** - 监控工作相关应用通知
- 🎮 **游戏辅助** - 监听游戏通知提醒

## 快速开始

```javascript
// 1. 引入插件
const notificationModule = uni.requireNativePlugin('OtcNotificationListener');

// 2. 检查权限
if (!notificationModule.checkPermission()) {
  notificationModule.openSettings(); // 引导用户授权
}

// 3. 开始监听
notificationModule.startListening((data) => {
  console.log('应用：', data.packageName);
  console.log('标题：', data.title);
  console.log('内容：', data.text);
  console.log('时间：', data.timestamp);
});

// 4. 停止监听（可选）
// notificationModule.stopListening();
```

## API 列表

### checkPermission()
检查是否已获得通知监听权限

**返回值**：`Boolean`

### openSettings()
打开系统通知监听设置页面，引导用户授权

### startListening(callback)
开始监听通知，callback 接收通知数据

**回调数据**：
```javascript
{
  packageName: String,  // 应用包名
  title: String,        // 通知标题
  text: String,         // 通知内容
  timestamp: Number     // 时间戳
}
```

### stopListening()
停止监听通知

### isServiceRunning()
检查监听服务是否正在运行

**返回值**：`Boolean`

## 使用示例

### 监听微信消息

```javascript
notificationModule.startListening((data) => {
  if (data.packageName === 'com.tencent.mm') {
    console.log('收到微信消息：', data.text);
    // 你的业务逻辑
  }
});
```

### 过滤特定关键词

```javascript
notificationModule.startListening((data) => {
  if (data.text.includes('验证码')) {
    console.log('收到验证码：', data.text);
    // 自动提取验证码
  }
});
```

### 消息记录

```javascript
const messages = [];

notificationModule.startListening((data) => {
  messages.push({
    app: data.packageName,
    title: data.title,
    content: data.text,
    time: new Date(data.timestamp)
  });
  
  // 保存到数据库或显示在界面上
});
```

## 常见应用包名

| 应用 | 包名 |
|------|------|
| 微信 | com.tencent.mm |
| QQ | com.tencent.mobileqq |
| 钉钉 | com.alibaba.android.rimet |
| 企业微信 | com.tencent.wework |
| 支付宝 | com.eg.android.AlipayGphone |

## 注意事项

### 权限说明
- 需要用户在系统设置中手动开启"通知使用权"
- 插件提供了 `openSettings()` 方法引导用户授权
- 务必在隐私政策中说明通知监听的用途

### 兼容性
- ✅ 支持 Android 5.0（API 21）及以上
- ❌ 不支持 iOS（iOS 系统限制）
- ⚠️ 部分厂商（小米、华为等）需要关闭省电优化

### 隐私合规
- 通知监听属于敏感权限，请遵守相关法律法规
- 收集的通知数据请妥善保管，不要用于非法用途
- 必须在应用隐私政策中明确说明用途

### 性能建议
- 不使用时及时调用 `stopListening()` 停止监听
- 避免在回调函数中执行耗时操作
- 及时清理不需要的通知记录数据

## 测试说明

- **必须使用真机测试**，模拟器可能无法正常工作
- 建议在多个品牌手机上测试（小米、华为、OPPO、vivo等）
- 测试不同场景：前台运行、后台运行、息屏状态

## 技术支持

### 问题反馈
- GitHub Issues: [github.com/gaoxl1992/android-plugin-monidtor](https://github.com/gaoxl1992/android-plugin-monidtor/issues)
- Email: 19528863269@163.com

### 完整文档
项目包含详细的 README.md 和快速开始指南，提供更多使用示例和常见问题解答。

## 版本信息

**当前版本**：v1.0.0  
**更新日期**：2024-12-17  
**支持平台**：Android  

### 更新日志

#### v1.0.0 (2024-12-17)
- 🎉 首次发布
- ✅ 支持监听系统所有应用通知
- ✅ 提供权限检查和引导接口
- ✅ 提供服务状态监控
- ✅ 完整的使用文档和示例代码

## 开源协议

MIT License

---

**立即体验**，5 分钟快速集成通知监听功能！

